# T-BEAM 地上局モジュール 取扱説明書

## 1. 概要

このモジュールは、H-62-Avionicsプロジェクトのフライトモジュール用の地上追跡局です。
T-BEAMボードを使用し、フライトモジュールからLoRa無線通信で送信されるテレメトリデータを受信・表示します。また、ボタン操作によりフライトモジュールへコマンドを送信することも可能です。

## 2. ハードウェア

- **T-BEAM:** LoRaモジュール、GPSモジュール、OLEDディスプレイ、ボタンが一体となった開発ボードです。

## 3. 機能

- **テレメトリ受信:** フライトモジュールから送信される各種データをLoRaで受信します。
- **情報表示:** 受信したデータや自身のGPS情報をOLEDディスプレイに表示します。
- **シリアル出力:** 受信した詳細なテレメトリデータをPCのシリアルモニタに出力します。

## 4. 操作方法

### 4.1. 起動

T-BEAMに電源を接続すると、システムが自動的に起動します。ディスプレイに "System Start" と表示された後、待機画面に移行します。

### 4.2. 画面の切り替え

搭載されているボタンを**短く押す**と、ディスプレイの表示ページが切り替わります。ページは2種類あります。

- **ページ0: GPS情報画面**
- **ページ1: バルブ情報画面**


## 5. 表示内容

### 5.1. ページ0: GPS情報画面

```
--- GPS ---      [電波強度]
 H-62 Lat: (緯度)
      Lng: (経度)
=====================
 Now Lat: (現在地の緯度)
     Lng: (現在地の経度)
     Sat: (衛星数)
```

- **電波強度:** LoRaの受信信号強度(RSSI)を5段階のバーで表示します。
- **H-62 Lat/Lng:** フライトモジュールから受信した緯度・経度です。
- **Now Lat/Lng:** このT-BEAMが現在受信しているGPSの緯度・経度です。
- **Sat:** T-BEAMが受信しているGPS衛星の数です。

### 5.2. ページ1: LoRa・バルブ情報画面

```
--- LoRa ---     [電波強度]
  RSSI: (RSSI値) dBm
   SNR: (SNR値) dB
  MAIN: (メインバルブ開度) deg
  SUPPLY: (供給バルブ開度) deg
```

- **電波強度:** LoRaの受信信号強度(RSSI)を5段階のバーで表示します。
- **RSSI:** 受信信号強度(Received Signal Strength Indicator)の具体的な値です。
- **SNR:** 信号対雑音比(Signal-to-Noise Ratio)です。
- **MAIN:** メインバルブの現在の開度(°)です。
- **SUPPLY:** 供給バルブの現在の開度(°)です。

## 6. シリアル出力

USB経由でPCに接続し、シリアルモニタを開くと、フライトモジュールから受信したより詳細なテレメトリデータを確認できます。

**ボーレート:** `115200` (platformio.iniの設定に依存します)

## 7. 運用手順

T-BEAMを運用する際は、以下の点に注意してください。

1. **設置場所:** T-BEAMはGPS信号を受信するため、開けた場所に設置してください。障害物が多い場所では受信精度が低下します。

2. **電源供給:** microUSBケーブルを用いて給電することが可能です。モバイルバッテリー駆動の場合は、残量に注意してください。

3. **LoRa通信:** LoRa通信は長距離通信が可能ですが、環境によっては通信距離が短くなることがあります。定期的に通信状況を確認してください。

4. **データ確認:** シリアルモニタを使用して、受信したテレメトリデータを定期的に確認してください。異常があった場合は、迅速に対応することが重要です。

5. **メンテナンス:** 定期的にハードウェアの点検を行い、異常がないか確認してください。特に、接続端子や配線の状態をチェックすることが重要です。

以下の手順通りに操作を行ってください。
1. **GPS情報画面**を表示します。
- **H-62 Lat/Lng:** フライトモジュールから受信した緯度・経度です。
- **Now Lat/Lng:** このT-BEAMが現在受信しているGPSの緯度・経度です。
- **Sat:** T-BEAMが受信しているGPS衛星の数です。
- **You-> 00 km ->Rocket** 運用者とロケットの
H-62 Lat/Lng の情報を基に，位置情報を船の責任者に伝えます。

2. 船を移動させてもらいます。
3. 機体を回収してください。
